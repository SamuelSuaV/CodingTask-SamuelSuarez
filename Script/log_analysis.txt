----------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/samuel/Library/CloudStorage/OneDrive-Universidaddelosandes/Research Assistanceship/CodingTask-Samu
> elSuarez/Script/log_analysis.txt
  log type:  text
 opened on:  18 Aug 2025, 21:38:15

.   
.  * Load processed data
.   
.  use "$processed_data/build_dofile.dta"

.   
.  * Set year as the time variable
.   
.  tsset country_id year, yearly

Panel variable: country_id (strongly balanced)
 Time variable: year, 1990 to 2019
         Delta: 1 year

.   
.   
.  // TS plots
.   
.  * country id's can be found using: label list country_id
.  * graphed country id's 176 25 42 65 69 (USA BRAZIL COLOMBIA FRANCE GERMANY)
.   
.   
.  * Log GDP
.  
.  twoway ///
>     (line log_cgdpo_capita year if country_id == 176, lcolor(blue)) ///
>     (line log_cgdpo_capita year if country_id == 25, lcolor(red)) ///
>     (line log_cgdpo_capita year if country_id == 42, lcolor(green)) ///
>     (line log_cgdpo_capita year if country_id == 65, lcolor(orange)) ///
>     (line log_cgdpo_capita year if country_id == 69, lcolor(purple)), ///
>     title("Evolution of log output side GDP per capita") ///
>         subtitle("For USA, Brazil, Colombia, France and Germany (1990-2019)") ///
>     legend(order(1 "USA" 2 "Brazil" 3 "Colombia" 4 "France" 5 "Germany")) ///
>         ytitle("Log output side GDP per capita") ///
>         note("GDP per capita measured at current PPPs in 2017 USD")

.         
.  graph save "$output/log_gdp_capita_graph.gph", replace
file Output/log_gdp_capita_graph.gph saved

.  
.  
.  * Log TFP
.  
.   twoway ///
>     (line log_rtfpna year if country_id == 176, lcolor(blue)) ///
>     (line log_rtfpna year if country_id == 25, lcolor(red)) ///
>     (line log_rtfpna year if country_id == 42, lcolor(green)) ///
>     (line log_rtfpna year if country_id == 65, lcolor(orange)) ///
>     (line log_rtfpna year if country_id == 69, lcolor(purple)), ///
>     title("Evolution of log total factor productivity") ///
>         subtitle("For USA, Brazil, Colombia, France and Germany (1990-2019)") ///
>     legend(order(1 "USA" 2 "Brazil" 3 "Colombia" 4 "France" 5 "Germany")) ///
>         ytitle("Log total factor productivity") ///
>         note("TFP measured at constant national prices (2017=1)")

.         
.  graph save "$output/log_tfp_graph.gph", replace
file Output/log_tfp_graph.gph saved

. 
.  
.   * Labor share
.   
.    twoway ///
>     (line labsh year if country_id == 176, lcolor(blue)) ///
>     (line labsh year if country_id == 25, lcolor(red)) ///
>     (line labsh year if country_id == 42, lcolor(green)) ///
>     (line labsh year if country_id == 65, lcolor(orange)) ///
>     (line labsh year if country_id == 69, lcolor(purple)), ///
>     title("Evolution of the labor share") ///
>         subtitle("For USA, Brazil, Colombia, France and Germany (1990-2019)") ///
>     legend(order(1 "USA" 2 "Brazil" 3 "Colombia" 4 "France" 5 "Germany")) ///
>         ytitle("Labor share") ///
>         note("Labor share measured at current national prices")

.         
.  graph save "$output/log_tfp_graph.gph", replace
file Output/log_tfp_graph.gph saved

.  
.  // Cumulative growth plots
.   
.  * Cumulative GDP growth
.  
.  twoway ///
>     (area cum_gr_cgdpo_capita year if country_id == 176, fcolor(blue%10) ///
>     lcolor(blue)) ///
>     (area cum_gr_cgdpo_capita year if country_id == 25, fcolor(red%10) ///
>     lcolor(red)) ///
>     (area cum_gr_cgdpo_capita year if country_id == 42, fcolor(green%10) ///
>     lcolor(green)) ///
>     (area cum_gr_cgdpo_capita year if country_id == 65, fcolor(orange%10) ///
>     lcolor(orange)) ///
>     (area cum_gr_cgdpo_capita year if country_id == 69, fcolor(purple%10) ///
>     lcolor(purple)), ///
>     title("Evolution of cumulative output side GDP growth since 1990") ///
>     subtitle("For USA, Brazil, Colombia, France and Germany (until 2019)") ///
>     legend(order(1 "USA" 2 "Brazil" 3 "Colombia" 4 "France" 5 "Germany")) ///
>     ytitle("Cumulative GDP per capita growth") ///
>     note("GDP per capita measured at current PPPs")

.         
.   graph save "$output/cumgrowth_gdp_capita_graph.gph", replace
file Output/cumgrowth_gdp_capita_graph.gph saved

.   
.   
.    * Cumulative TFP growth
.  
.  twoway ///
>     (area cum_gr_rtfpna year if country_id == 176, fcolor(blue%20) ///
>         lcolor(blue)) ///
>     (area cum_gr_rtfpna year if country_id == 25, fcolor(red%20) ///
>         lcolor(red)) ///
>     (area cum_gr_rtfpna year if country_id == 42, fcolor(green%20) ///
>         lcolor(green)) ///
>     (area cum_gr_rtfpna year if country_id == 65, fcolor(orange%20) ///
>         lcolor(orange)) ///
>     (area cum_gr_rtfpna year if country_id == 69, fcolor(purple%20) ///
>         lcolor(purple)), ///
>     title("Evolution of cumulative total factor productivity growth since 1990") ///
>     subtitle("For USA, Brazil, Colombia, France and Germany (until 2019)") ///
>     legend(order(1 "USA" 2 "Brazil" 3 "Colombia" 4 "France" 5 "Germany")) ///
>     ytitle("Cumulative total factor productivity growth") ///
>     note("TFP measured at national prices (2017=1))")

.         
.   graph save "$output/cumgrowth_tfp_graph.gph", replace
file Output/cumgrowth_tfp_graph.gph saved

.   
.   * Cumulative labor share growth 
.   
.  twoway ///
>     (area cum_gr_labsh year if country_id == 176, fcolor(blue%20) ///
>         lcolor(blue)) ///
>     (area cum_gr_labsh year if country_id == 25, fcolor(red%20) ///
>         lcolor(red)) ///
>     (area cum_gr_labsh year if country_id == 42, fcolor(green%20) ///
>         lcolor(green)) ///
>     (area cum_gr_labsh year if country_id == 65, fcolor(orange%20) ///
>         lcolor(orange)) ///
>     (area cum_gr_labsh year if country_id == 69, fcolor(purple%20) ///
>         lcolor(purple)), ///
>     title("Evolution of cumulative labor share growth since 1990") ///
>     subtitle("For USA, Brazil, Colombia, France and Germany (until 2019)") ///
>     legend(order(1 "USA" 2 "Brazil" 3 "Colombia" 4 "France" 5 "Germany")) ///
>     ytitle("Cumulative labor share growth") ///
>     note("Labor share measured at current national prices")

.         
.  graph save "$output/cumgrowth_labsh_graph.gph", replace
file Output/cumgrowth_labsh_graph.gph saved

.   
.  // Scatter plots
.   
.  preserve 

.   
.  * Cumulative GDP vs TFP growth
.   
.    keep if year == 2019 // We eliminate points outside of 2019, to measure
(5,307 observations deleted)

.                                           // cumulative growth only by this year
.                                           
.                                           
.    centile cum_gr_cgdpo_capita, centile(1 99)

                                                          Binom. interp.   
    Variable |       Obs  Percentile    Centile        [95% conf. interval]
-------------+-------------------------------------------------------------
cum_gr_cgd~a |       181          1   -64.15829       -97.04807   -38.76037*
             |                   99    1033.489        476.8618    1473.684*

* Lower (upper) confidence limit held at minimum (maximum) of sample

.    keep if cum_gr_cgdpo_capita >= r(c_1) & cum_gr_cgdpo_capita <= r(c_2)
(4 observations deleted)

.                                                                                 // We eliminate the 1% tail ends of
.                                                                                 // the distribution to avoid outlier
> s
.                                                                                         
.    centile cum_gr_rtfpna, centile(1 99) // TFP outliers

                                                          Binom. interp.   
    Variable |       Obs  Percentile    Centile        [95% conf. interval]
-------------+-------------------------------------------------------------
cum_gr_rtf~a |       102          1    -57.2684       -57.42507   -37.95724*
             |                   99    101.3341        43.34562    102.9354*

* Lower (upper) confidence limit held at minimum (maximum) of sample

.    keep if cum_gr_rtfpna >= r(c_1) & cum_gr_rtfpna <= r(c_2)
(79 observations deleted)

.    
.         twoway ///
>                 (scatter cum_gr_cgdpo_capita cum_gr_rtfpna ///
>                         if !inlist(country, "United States", "Brazil", "Colombia", "France", "Germany"), ///
>                         mcolor(black%20)) /// All other countries in black
>                 (scatter cum_gr_cgdpo_capita cum_gr_rtfpna ///
>                         if inlist(country, "United States"), mcolor(blue) ///
>                         mlabel(country) mlabcolor(blue)) /// Label for USA
>                 (scatter cum_gr_cgdpo_capita cum_gr_rtfpna ///
>                         if inlist(country, "Brazil"), mcolor(red) ///
>                         mlabel(country) mlabcolor(red)) /// Label for Brazil
>                 (scatter cum_gr_cgdpo_capita cum_gr_rtfpna ///
>                         if inlist(country, "Colombia"), mcolor(green) ///
>                         mlabel(country) mlabcolor(green) mlabposition(6)) /// Label for Colombia
>                 (scatter cum_gr_cgdpo_capita cum_gr_rtfpna ///
>                         if inlist(country, "France"), mcolor(orange) ///
>                         mlabel(country) mlabcolor(orange)) /// Label for France
>                 (scatter cum_gr_cgdpo_capita cum_gr_rtfpna ///
>                         if inlist(country, "Germany"), mcolor(purple) ///
>                         mlabel(country) mlabcolor(purple)), /// Label for Germany
>                 title("Relationship between  TFP and cumulative GDP growth" ///
>                   "from 1990 to 2019") ///
>                 xtitle("Total factor productivity (national prices, 2017 = 1)") ///
>                 ytitle("Cumulative GDP per capita growth") ///
>                 legend(off) ///
>                 note("Cumulative growth from 1990 to 2019")

.                 
.   graph save "$output/cumgrowthgdp_rtfpna_graph.gph", replace
file Output/cumgrowthgdp_rtfpna_graph.gph saved

.   
.  restore

.   
.  preserve

.                 
.                 
.  * Cumulative labor share growth vs GDP per capita
.         
.   keep if year == 2019
(5,307 observations deleted)

.         
.   centile cum_gr_labsh, centile(1 99) // Cum. Labsh growth outliers

                                                          Binom. interp.   
    Variable |       Obs  Percentile    Centile        [95% conf. interval]
-------------+-------------------------------------------------------------
cum_gr_labsh |       134          1   -52.27981       -55.34019   -40.36852*
             |                   99     93.3679        29.14268    96.42672*

* Lower (upper) confidence limit held at minimum (maximum) of sample

.   keep if cum_gr_labsh >= r(c_1) & cum_gr_labsh <= r(c_2)                                                           
>             
(51 observations deleted)

.                                                                                         
.   centile cum_gr_cgdpo_capita, centile(1 99) // TFP outliers

                                                          Binom. interp.   
    Variable |       Obs  Percentile    Centile        [95% conf. interval]
-------------+-------------------------------------------------------------
cum_gr_cgd~a |       132          1   -80.76133       -97.04807    -25.4567*
             |                   99     1140.61        426.9577    1473.684*

* Lower (upper) confidence limit held at minimum (maximum) of sample

.   keep if cum_gr_cgdpo_capita >= r(c_1) & cum_gr_cgdpo_capita <= r(c_2) 
(2 observations deleted)

.    
.         
.         twoway ///
>                 (scatter cum_gr_labsh cum_gr_cgdpo_capita ///
>                         if !inlist(country, "United States", "Brazil", "Colombia", "France", "Germany"), ///
>                         mcolor(black%20)) /// All other countries in black
>                 (scatter cum_gr_labsh cum_gr_cgdpo_capita ///
>                         if inlist(country, "United States"), mcolor(blue) mlabposition(9) ///
>                         mlabel(country) mlabcolor(blue)) /// Label for USA
>                 (scatter cum_gr_labsh cum_gr_cgdpo_capita ///
>                         if inlist(country, "Brazil"), mcolor(red) ///
>                         mlabel(country) mlabcolor(red)) /// Label for Brazil
>                 (scatter cum_gr_labsh cum_gr_cgdpo_capita ///
>                         if inlist(country, "Colombia"), mcolor(green) ///
>                         mlabel(country) mlabcolor(green)) /// Label for Colombia
>                 (scatter cum_gr_labsh cum_gr_cgdpo_capita ///
>                         if inlist(country, "France"), mcolor(orange) ///
>                         mlabel(country) mlabcolor(orange)) /// Label for France
>                 (scatter cum_gr_labsh cum_gr_cgdpo_capita ///
>                         if inlist(country, "Germany"), mcolor(purple) ///
>                         mlabel(country) mlabcolor(purple)), /// Label for Germany
>                 title("Relationship between cumulative labor share and" ///
>                           "GDP per capita growth from 1990 to 2019") ///
>                 xtitle("Cumulative GDP per capita growth") ///
>                 ytitle("Cumulative labor share growth (current national prices)") ///
>                 legend(off) ///
>                 note("Cumulative growth from 1990 to 2019")

. 
.                 
.           graph save "$output/cumgrowthlabsh_gdp_graph.gph", replace
file Output/cumgrowthlabsh_gdp_graph.gph saved

.                 
.  restore

. 
.   
.   
. 
end of do-file

